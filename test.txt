<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from urdf/mirte.xacro               | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="mirte">
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.203125 0.23828125 0.28515625 1.0"/>
  </material>
  <material name="yellow">
    <color rgba="1 1 0 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="grey">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="orange">
    <color rgba="1.0 0.423529411765 0.0392156862745 1.0"/>
  </material>
  <material name="brown">
    <color rgba="0.870588235294 0.811764705882 0.764705882353 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.80078125 0.12890625 0.1328125 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="wood">
    <color rgba="1.0 0.0 1.0 1.0"/>
  </material>
  <gazebo reference="link_chassis">
    <turnGravityOff>false</turnGravityOff>
    <material>Gazebo/Orange</material>
  </gazebo>
  <gazebo reference="link_chassis_inertia">
    <turnGravityOff>false</turnGravityOff>
    <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference="link_left_wheel">
    <mu1 value="1.0"/>
    <mu2 value="1.0"/>
    <kp value="1000000.0"/>
    <kd value="100.0"/>
    <minDepth>0.001</minDepth>
    <maxVel>0.55</maxVel>
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo reference="link_right_wheel">
    <mu1 value="1.0"/>
    <mu2 value="1.0"/>
    <kp value="1000000.0"/>
    <kd value="100.0"/>
    <minDepth>0.001</minDepth>
    <maxVel>0.55</maxVel>
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo reference="caster_wheel_back">
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
    <material>Gazebo/Red</material>
  </gazebo>
  <gazebo reference="base_ir_left">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Purple</material>
  </gazebo>
  <gazebo reference="base_ir_right">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Purple</material>
  </gazebo>
  <!-- TODO: currewntly this is also defined in the macros.xacro
 I think it should be over here -->
  <!--
<transmission name="left_wheel_transmission">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="joint_left_wheel">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>  
  </joint>
  <actuator name="left_wheel_actuator">
    <mechanicalReduction>1</mechanicalReduction>
    <hardwareInterface>VelocityJointInterface</hardwareInterface>
  </actuator>
</transmission>

<transmission name="right_wheel_transmission">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="joint_right_wheel">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>  
  </joint>
  <actuator name="right_wheel_actuator">
    <mechanicalReduction>1</mechanicalReduction>
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </actuator>
</transmission>
-->
  <gazebo>
    <!-- <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/mirte</robotNamespace>
    </plugin> -->
  </gazebo>
  <test name="sonar_enable" value="true"/>
  <test name="intensity_enable" value="true"/>
  <test name="camera_enable" value="true"/>
  <test name="lidar_enable" value="true"/>
  <joint name="lidar" type="fixed">
    <origin rpy="0 0 0" xyz="0.012 0 0.105"/>
    <parent link="link_chassis"/>
    <child link="lidar_link"/>
  </joint>
  <link name="lidar_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 -0.03"/>
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/lidar.stl" rpy="0 0 1.57079633" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.03"/>
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/lidar.stl" rpy="0 0 1.57079633" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="lidar_link">
    <sensor name="lidar" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>true</visualize>
      <update_rate>10</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.14</min_angle>
            <max_angle>3.14</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.15</min>
          <!-- bit more than the actual min range of the lidar, but otherwise it will detect the mirte itself-->
          <max>12</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_laser.so" name="ultra_controller">
        <topicName>/mirte/scan</topicName>
        <frameName>lidar_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="joint_camera" type="fixed">
    <origin rpy="0 0 0" xyz="0.1 0 0.035"/>
    <parent link="link_chassis"/>
    <child link="camera_link"/>
  </joint>
  <link name="camera_link"/>
  <gazebo reference="camera_link">
    <sensor name="camera1" type="camera">
      <update_rate>10</update_rate>
      <camera name="head">
        <horizontal_fov>1.2</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.0001</near>
          <far>20</far>
        </clip>
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <ros>
          <namespace>custom_ns</namespace>
          <remapping>~/image_raw:=custom</remapping>
          <remapping>~/camera_info:=custom_info</remapping>
        </ros>
        <camera_name>camera1</camera_name>
        <frame_name>camera_link</frame_name>
        <hack_baseline>0.07</hack_baseline>
      </plugin>
    </sensor>
  </gazebo>
  <!-- Camera link -->
  <link name="mirte_rs200_camera">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://realsense_gazebo_plugin/models/realsense_camera/meshes/realsense.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <box size="0.0078 0.130 0.0192"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.0615752"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="9.108e-05" ixy="0" ixz="0" iyy="2.51e-06" iyz="0" izz="8.931e-05"/>
    </inertial>
  </link>
  <!-- Connect camera to parent frame-->
  <joint name="mirte_realsense_joint" type="fixed">
    <parent link="link_chassis"/>
    <child link="mirte_rs200_camera"/>
    <origin rpy="0 0 0" xyz="0.1 0 0.035"/>
  </joint>
  <!-- Virtual links representing the cameras positons and orientations-->
  <link name="mirte_depth"/>
  <!-- Joints positioning the virtual links with respect to the camera main link-->
  <joint name="mirte_depth_joint" type="fixed">
    <parent link="mirte_rs200_camera"/>
    <child link="mirte_depth"/>
    <origin rpy="0 0 0" xyz="0 -0.03 0.004"/>
  </joint>
  <gazebo reference="mirte_depth">
    <sensor name="depth_camera" type="camera">
      <always_on>true</always_on>
      <visualize>false</visualize>
      <update_rate>5</update_rate>
      <camera name="camera">
        <horizontal_fov>1.02974</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>10</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <!-- Noise is sampled independently per pixel on each frame.
                 That pixel's noise value is added to each of its color
                  channels, which at that point lie in the range [0,1]. -->
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="depth_camera_controller">
        <topicName>/mirte/dieptes</topicName>
        <camera_name>depth_camera</camera_name>
        <frame_name>mirte_depth</frame_name>
        <hack_baseline>0</hack_baseline>
        <min_depth>0.001</min_depth>
      </plugin>
    </sensor>
  </gazebo>
  <link name="link_chassis">
    <!-- pose and inertial -->
    <pose>0 0 0.015 0 0 0</pose>
    <inertial>
      <mass value="1"/>
      <origin rpy="0 0 0" xyz="0 0 0.015"/>
      <inertia ixx="0.0018416666666666668" ixy="0.0" ixz="0.0" iyy="0.003911738008333334" iyz="0.0" izz="0.005336738008333333"/>
    </inertial>
    <!-- body -->
    <collision name="collision_chassis">
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/mirte_base_coll.stl" rpy="0 0 1.57079633" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/mirte_base.stl" rpy="0 0 1.57079633" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="blue"/>
    </visual>
  </link>
  <gazebo reference="link_chassis">
    <gravity>0</gravity>
  </gazebo>
  <link name="base_link"/>
  <gazebo reference="base_link">
    <gravity>0</gravity>
  </gazebo>
  <joint name="base_joint" type="fixed">
    <parent link="base_link"/>
    <child link="link_chassis"/>
  </joint>
  <link name="link_caster_wheel_back">
    <collision>
      <origin rpy="0 0 0" xyz="-0.085715 0 -0.035"/>
      <geometry>
        <sphere radius="0.005"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="-0.085715 0 -0.035"/>
      <geometry>
        <sphere radius="0.005"/>
      </geometry>
      <material name="red"/>
    </visual>
    <inertial>
      <mass value="0.12"/>
      <origin rpy="0 0 0" xyz="-0.085715 0 -0.035"/>
      <inertia ixx="1.2000000000000002e-06" ixy="0" ixz="0" iyy="1.2000000000000002e-06" iyz="0" izz="1.2000000000000002e-06"/>
    </inertial>
  </link>
  <gazebo reference="link_caster_wheel_back">
    <gravity>0</gravity>
  </gazebo>
  <joint name="fixed" type="fixed">
    <parent link="link_chassis"/>
    <child link="link_caster_wheel_back"/>
  </joint>
  <link name="link_left_wheel">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <inertia ixx="2.828125e-05" ixy="0" ixz="0" iyy="2.828125e-05" iyz="0" izz="5.281250000000001e-05"/>
    </inertial>
    <collision name="link_left_wheel_collision">
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.015" radius="0.0325"/>
      </geometry>
    </collision>
    <!-- <visual name="link_${name}_visual">
        <origin rpy="0 1.5707 1.5707"  xyz="-0 0 0" />
        <geometry>

          <cylinder color="pink" length="0.015" radius="${radius}"/>
               

        </geometry>
        <material name="red" />
      </visual> -->
    <visual name="link_left_wheel_visual">
      <origin rpy="0 1.5707 4.7122926535897935" xyz="-0 0.0 0"/>
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/wheel.stl" rpy="0 0 3.141592653589793" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link_left_wheel">
    <gravity>0</gravity>
  </gazebo>
  <joint name="joint_left_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="0.010305 0.06385 -0.0075"/>
    <child link="link_left_wheel"/>
    <parent link="link_chassis"/>
    <axis rpy="0 0 0" xyz="0 1 0"/>
    <limit effort="10" velocity="8"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <transmission name="trans_left_wheel">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_left_wheel">
      <hardwareInterface>
        hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_left_wheel">
      <hardwareInterface>
        hardware_interface/VelocityJointInterface</hardwareInterface>
      <mechanicalReduction>120</mechanicalReduction>
    </actuator>
  </transmission>
  <link name="link_right_wheel">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <inertia ixx="2.828125e-05" ixy="0" ixz="0" iyy="2.828125e-05" iyz="0" izz="5.281250000000001e-05"/>
    </inertial>
    <collision name="link_right_wheel_collision">
      <origin rpy="0 1.5707 1.5707" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.015" radius="0.0325"/>
      </geometry>
    </collision>
    <!-- <visual name="link_${name}_visual">
        <origin rpy="0 1.5707 1.5707"  xyz="-0 0 0" />
        <geometry>

          <cylinder color="pink" length="0.015" radius="${radius}"/>
               

        </geometry>
        <material name="red" />
      </visual> -->
    <visual name="link_right_wheel_visual">
      <origin rpy="0 1.5707 1.5707" xyz="-0 0.0 0"/>
      <geometry>
        <mesh filename="file:///home/arendjan/catkin_ws/src/mirte-gazebo/meshes/wheel.stl" rpy="0 0 0.0" scale="1 1 1"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link_right_wheel">
    <gravity>0</gravity>
  </gazebo>
  <joint name="joint_right_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="0.010305 -0.06385 -0.0075"/>
    <child link="link_right_wheel"/>
    <parent link="link_chassis"/>
    <axis rpy="0 0 0" xyz="0 1 0"/>
    <limit effort="10" velocity="8"/>
    <dynamics damping="0.0" friction="0.0"/>
  </joint>
  <transmission name="trans_right_wheel">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_right_wheel">
      <hardwareInterface>
        hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_right_wheel">
      <hardwareInterface>
        hardware_interface/VelocityJointInterface</hardwareInterface>
      <mechanicalReduction>120</mechanicalReduction>
    </actuator>
  </transmission>
  <joint name="sonar_left" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 .45" xyz="0.085 0.04 0.022"/>
    <parent link="link_chassis"/>
    <child link="base_sonar_left"/>
  </joint>
  <link name="base_sonar_left">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <mass value="0.0"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link>
  <gazebo reference="base_sonar_left">
    <sensor name="range_sensor_left" type="ray">
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <!-- for some reason 1 does not work, we neex 2x2 -->
            <samples>4</samples>
            <resolution>1</resolution>
            <min_angle>-0.1308996938995747</min_angle>
            <max_angle>0.1308996938995747</max_angle>
          </horizontal>
          <vertical>
            <samples>4</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <!-- Don't look at the floor-->
            <max_angle>0.06544984694978735</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.01</min>
          <max>5</max>
          <resolution>0.01</resolution>
        </range>
        <!-- Using gazebo's noise instead of plugin's -->
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <!-- Using gazebo's update rate instead of plugin's -->
      <update_rate>30</update_rate>
      <plugin filename="libgazebo_ros_laser.so" name="laser_controller_sonarleft">
        <topicName>/mirte/scanSonarleft</topicName>
        <output_type>sensor_msgs/Range</output_type>
        <radiation_type>ultrasound</radiation_type>
        <frameName>base_sonar_left</frameName>
      </plugin>
      <!--         <plugin name="gazebo_ros_head_hokuyo_controlle" filename="libgazebo_ros_range_sensor.so" >
  <ros>
    <remapping>~/out:=/jemoeder</remapping>                                                               
  </ros>
   <output_type>sensor_msgs/LaserScan</output_type> 
</plugin> 
-->
      <!-- <plugin name="ultrasonic_sensor_1" filename="libgazebo_ros_ray_sensor.so">
    <ros>
        <remapping>~/out:=ultrasonic_sensor_1</remapping>
      </ros>
      <output_type>sensor_msgs/Range</output_type>
      <radiation_type>ultrasound</radiation_type>
      <frame_name>ultrasonic_1_link</frame_name> 
    </plugin>  -->
    </sensor>
  </gazebo>
  <joint name="sonar_right" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 -0.45" xyz="0.085 -0.04 0.022"/>
    <parent link="link_chassis"/>
    <child link="base_sonar_right"/>
  </joint>
  <link name="base_sonar_right">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <mass value="0.0"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link>
  <gazebo reference="base_sonar_right">
    <sensor name="range_sensor_right" type="ray">
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <!-- for some reason 1 does not work, we neex 2x2 -->
            <samples>4</samples>
            <resolution>1</resolution>
            <min_angle>-0.1308996938995747</min_angle>
            <max_angle>0.1308996938995747</max_angle>
          </horizontal>
          <vertical>
            <samples>4</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <!-- Don't look at the floor-->
            <max_angle>0.06544984694978735</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.01</min>
          <max>5</max>
          <resolution>0.01</resolution>
        </range>
        <!-- Using gazebo's noise instead of plugin's -->
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <!-- Using gazebo's update rate instead of plugin's -->
      <update_rate>30</update_rate>
      <plugin filename="libgazebo_ros_laser.so" name="laser_controller_sonarright">
        <topicName>/mirte/scanSonarright</topicName>
        <output_type>sensor_msgs/Range</output_type>
        <radiation_type>ultrasound</radiation_type>
        <frameName>base_sonar_right</frameName>
      </plugin>
      <!--         <plugin name="gazebo_ros_head_hokuyo_controlle" filename="libgazebo_ros_range_sensor.so" >
  <ros>
    <remapping>~/out:=/jemoeder</remapping>                                                               
  </ros>
   <output_type>sensor_msgs/LaserScan</output_type> 
</plugin> 
-->
      <!-- <plugin name="ultrasonic_sensor_1" filename="libgazebo_ros_ray_sensor.so">
    <ros>
        <remapping>~/out:=ultrasonic_sensor_1</remapping>
      </ros>
      <output_type>sensor_msgs/Range</output_type>
      <radiation_type>ultrasound</radiation_type>
      <frame_name>ultrasonic_1_link</frame_name> 
    </plugin>  -->
    </sensor>
  </gazebo>
  <!-- <xacro:property name="ir_angle_max" value="${radians(15)}"/> -->
  <joint name="ir_left" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 1.5707963267948966 0" xyz="0.0785 0.022 0.002"/>
    <parent link="link_chassis"/>
    <child link="base_ir_left"/>
  </joint>
  <link name="base_ir_left">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.01 0.01"/>
      </geometry>
      <material name="yellow"/>
    </visual>
    <inertial>
      <mass value="0.0"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link>
  <gazebo reference="base_ir_left">
    <sensor name="camera_ir_left" type="camera">
      <update_rate>10</update_rate>
      <camera name="head">
        <horizontal_fov>1.2</horizontal_fov>
        <image>
          <width>5</width>
          <height>5</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.0001</near>
          <far>300</far>
        </clip>
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller_ir_left">
        <camera_name>camera_ir</camera_name>
        <frame_name>base_ir_left</frame_name>
        <hack_baseline>0.07</hack_baseline>
        <frameName>base_ir_left</frameName>
        <cameraName>camera_ir_left</cameraName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- <xacro:property name="ir_angle_max" value="${radians(15)}"/> -->
  <joint name="ir_right" type="fixed">
    <axis xyz="0 1 0"/>
    <origin rpy="0 1.5707963267948966 0" xyz="0.0785 -0.022 0.002"/>
    <parent link="link_chassis"/>
    <child link="base_ir_right"/>
  </joint>
  <link name="base_ir_right">
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.05 0.037"/>
      </geometry>
    </collision>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.01 0.01"/>
      </geometry>
      <material name="yellow"/>
    </visual>
    <inertial>
      <mass value="0.0"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
  </link>
  <gazebo reference="base_ir_right">
    <sensor name="camera_ir_right" type="camera">
      <update_rate>10</update_rate>
      <camera name="head">
        <horizontal_fov>1.2</horizontal_fov>
        <image>
          <width>5</width>
          <height>5</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.0001</near>
          <far>300</far>
        </clip>
        <distortion>
          <k1>0.0</k1>
          <k2>0.0</k2>
          <k3>0.0</k3>
          <p1>0.0</p1>
          <p2>0.0</p2>
        </distortion>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller_ir_right">
        <camera_name>camera_ir</camera_name>
        <frame_name>base_ir_right</frame_name>
        <hack_baseline>0.07</hack_baseline>
        <frameName>base_ir_right</frameName>
        <cameraName>camera_ir_right</cameraName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/mirte</robotNamespace>
      <parameters>/home/arendjan/catkin_ws/src/mirte-gazebo/config/mirte_diff_drive.yaml</parameters>
    </plugin>
    <plugin filename="libgazebo_ros_controller_manager.so" name="gazebo_ros_controller_manager"/>
  </gazebo>
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive_controller">
      <publishWheelTF>false</publishWheelTF>
      <publishOdomTF>false</publishOdomTF>
      <wheelAcceleration>0</wheelAcceleration>
      <wheelTorque>5</wheelTorque>
      <publishTf>true</publishTf>
      <rosDebugLevel>debug</rosDebugLevel>
      <publishWheelJointState>true</publishWheelJointState>
      <alwaysOn>false</alwaysOn>
      <legacyMode>false</legacyMode>
      <updateRate>20</updateRate>
      <leftJoint>joint_left_wheel</leftJoint>
      <rightJoint>joint_right_wheel</rightJoint>
      <wheelSeparation>0.15</wheelSeparation>
      <wheelDiameter>0.065</wheelDiameter>
      <torque>20</torque>
      <commandTopic>
      /mirte/base_controller/cmd_vel</commandTopic>
      <odometryTopic>
      /mirte/base_controller/odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <robotBaseFrame>base_footprint</robotBaseFrame>
    </plugin>
  </gazebo>
</robot>

